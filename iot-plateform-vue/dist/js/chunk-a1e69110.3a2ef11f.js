(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-a1e69110","chunk-2d0f0a11","chunk-2d0d7dd6"],{"0f41":function(t,e,n){"use strict";n("4eb2")},"4eb2":function(t,e,n){},7942:function(t,e,n){"use strict";n.r(e),n.d(e,"getAlarmDetail",(function(){return r})),n.d(e,"getAlarmCount",(function(){return o})),n.d(e,"getMachineList",(function(){return c})),n.d(e,"getMachineCapacity",(function(){return u})),n.d(e,"getMachineStatus",(function(){return s})),n.d(e,"getMachineAlarms",(function(){return i})),n.d(e,"getLensPackerStatusCount",(function(){return l}));var a=n("b775");function r(t,e,n){return Object(a["default"])({url:"/lenspacker/lenspackerDashboard/getAlarmDetail",method:"get",headers:{"Content-Type":"application/json"},params:{startTime:t,endTime:e,machineName:n}})}function o(t,e,n){return Object(a["default"])({url:"/lenspacker/lenspackerDashboard/getAlarmCount",method:"get",headers:{"Content-Type":"application/json"},params:{startTime:t,endTime:e,machineName:n}})}function c(){return Object(a["default"])({url:"/lenspacker/lenspackerDashboard/getMachineList",method:"get",headers:{"Content-Type":"application/json"}})}function u(t,e){return Object(a["default"])({url:"/lenspacker/lenspackerDashboard/getMachineCapacity",method:"get",headers:{"Content-Type":"application/json"},params:{startTime:t,endTime:e}})}function s(){return Object(a["default"])({url:"/lenspacker/lenspackerDashboard/getAllStatus",method:"get",headers:{"Content-Type":"application/json"}})}function i(){return Object(a["default"])({url:"/lenspacker/lenspackerDashboard/getCurrentAlarm",method:"get",headers:{"Content-Type":"application/json"}})}function l(){return Object(a["default"])({url:"/lenspacker/lenspackerDashboard/getStatusCount",method:"get",headers:{"Content-Type":"application/json"}})}},"9cd5":function(t,e,n){"use strict";n.r(e),n.d(e,"getStatus",(function(){return r})),n.d(e,"getAlarmInfo",(function(){return o})),n.d(e,"getCoatingStatusCount",(function(){return c}));var a=n("b775");function r(){return Object(a["default"])({url:"/coating/coatingDashboard/getStatus",method:"get",headers:{"Content-Type":"application/json"}})}function o(){return Object(a["default"])({url:"/coating/coatingDashboard/getAlarmInfo",method:"get",headers:{"Content-Type":"application/json"}})}function c(){return Object(a["default"])({url:"/coating/coatingDashboard/getStatusCount",method:"get",headers:{"Content-Type":"application/json"}})}},fd55:function(t,e,n){"use strict";n.r(e);n("ac1f"),n("5319");var a=n("7a23"),r=Object(a["ib"])("data-v-f356c48c");Object(a["J"])("data-v-f356c48c");var o=Object(a["p"])("div",{class:"card-header",style:{"font-weight":"bold"}},[Object(a["p"])("span",null,"注塑机")],-1),c={class:"card-header",style:{"margin-bottom":"10px"}},u=Object(a["p"])("span",null,"自动运转",-1),s=Object(a["p"])("span",null,"低温保持",-1),i=Object(a["p"])("span",null,"报警",-1),l=Object(a["p"])("span",null,"离线",-1),f=Object(a["p"])("span",null,"其他",-1),p=Object(a["p"])("div",{class:"card-header",style:{"font-weight":"bold"}},[Object(a["p"])("span",null,"包料机")],-1),d={class:"card-header",style:{"margin-bottom":"10px"}},b=Object(a["p"])("span",null,"自动运转",-1),h=Object(a["p"])("span",null,"报警",-1),g=Object(a["p"])("span",null,"离线",-1),m=Object(a["p"])("div",{class:"card-header",style:{"font-weight":"bold"}},[Object(a["p"])("span",null,"镀膜机")],-1),j={class:"card-header",style:{"margin-bottom":"10px"}},k=Object(a["p"])("span",null,"自动运转",-1),O=Object(a["p"])("span",null,"上料预警",-1),C=Object(a["p"])("span",null,"离线",-1);Object(a["H"])();var y=r((function(t,e,n,y,_,v){var P=Object(a["P"])("el-card"),T=Object(a["P"])("el-col"),w=Object(a["P"])("el-row");return Object(a["G"])(),Object(a["l"])("div",null,[Object(a["p"])(w,{gutter:20,style:{"margin-bottom":"10px"}},{default:r((function(){return[Object(a["p"])(T,{span:24},{default:r((function(){return[Object(a["p"])(P,{shadow:"hover",style:{height:"280px"},id:"totalStatusCount"})]})),_:1})]})),_:1}),Object(a["p"])(w,{gutter:20},{default:r((function(){return[Object(a["p"])(T,{span:8},{default:r((function(){return[Object(a["p"])(P,{shadow:"hover",style:{height:"500px"}},{default:r((function(){return[o,(Object(a["G"])(!0),Object(a["l"])(a["b"],null,Object(a["N"])(v.getFanucCount,(function(t,e){return Object(a["G"])(),Object(a["l"])(P,{key:e,style:{"margin-top":"10px"}},{default:r((function(){return[Object(a["p"])("div",c,[Object(a["p"])("span",{style:{cursor:"pointer"},onClick:function(e){return v.onCardClick(t.floor,"fanuc")}},Object(a["T"])(t.floor.replace("F","楼")),9,["onClick"])]),Object(a["p"])(w,{align:"middle",style:{"text-align":"center"}},{default:r((function(){return[Object(a["p"])(T,{span:5},{default:r((function(){return[Object(a["p"])("span",{class:"typeItem_orderNum",style:{"background-color":"rgba(59,162,114,1)",cursor:"pointer"},onClick:function(e){return v.onCountClick(t.floor,"fanuc","02")}},Object(a["T"])(t["02"]?t["02"]:0),9,["onClick"])]})),_:2},1024),Object(a["p"])(T,{span:5},{default:r((function(){return[Object(a["p"])("span",{class:"typeItem_orderNum",style:{"background-color":"rgba(250,200,88,1)",cursor:"pointer"},onClick:function(e){return v.onCountClick(t.floor,"fanuc","17")}},Object(a["T"])(t["17"]?t["17"]:0),9,["onClick"])]})),_:2},1024),Object(a["p"])(T,{span:4},{default:r((function(){return[Object(a["p"])("span",{class:"typeItem_orderNum",style:{"background-color":"rgba(238,102,102,1)",cursor:"pointer"},onClick:function(e){return v.onCountClick(t.floor,"fanuc","03")}},Object(a["T"])(t["03"]?t["03"]:0),9,["onClick"])]})),_:2},1024),Object(a["p"])(T,{span:5},{default:r((function(){return[Object(a["p"])("span",{class:"typeItem_orderNum",style:{"background-color":"gray",cursor:"pointer"},onClick:function(e){return v.onCountClick(t.floor,"fanuc","-1")}},Object(a["T"])(t["-1"]?t["-1"]:0),9,["onClick"])]})),_:2},1024),Object(a["p"])(T,{span:5},{default:r((function(){return[Object(a["p"])("span",{class:"typeItem_orderNum",style:{"background-color":"rgba(252,132,82,1)",cursor:"pointer"},onClick:function(e){return v.onCountClick(t.floor,"fanuc","default")}},Object(a["T"])(v.getFanucTotalCount(t.floor)-(t["02"]?t["02"]:0)-(t["17"]?t["17"]:0)-(t["03"]?t["03"]:0)-(t["-1"]?t["-1"]:0)),9,["onClick"])]})),_:2},1024)]})),_:2},1024),Object(a["p"])(w,{align:"middle",style:{"text-align":"center","font-family":"'Microsoft YaHei',serif","font-size":"11px","font-weight":"bold","margin-top":"10px"}},{default:r((function(){return[Object(a["p"])(T,{span:5},{default:r((function(){return[u]})),_:1}),Object(a["p"])(T,{span:5},{default:r((function(){return[s]})),_:1}),Object(a["p"])(T,{span:4},{default:r((function(){return[i]})),_:1}),Object(a["p"])(T,{span:5},{default:r((function(){return[l]})),_:1}),Object(a["p"])(T,{span:5},{default:r((function(){return[f]})),_:1})]})),_:1})]})),_:2},1024)})),128))]})),_:1})]})),_:1}),Object(a["p"])(T,{span:8},{default:r((function(){return[Object(a["p"])(P,{shadow:"hover",style:{height:"500px"}},{default:r((function(){return[p,(Object(a["G"])(!0),Object(a["l"])(a["b"],null,Object(a["N"])(v.getLensPackerCount,(function(t,e){return Object(a["G"])(),Object(a["l"])(P,{key:e,style:{"margin-top":"10px"}},{default:r((function(){return[Object(a["p"])("div",d,[Object(a["p"])("span",{style:{cursor:"pointer"},onClick:function(e){return v.onCardClick(t.floor,"lensPacker")}},Object(a["T"])(t.floor.replace("F","楼")),9,["onClick"])]),Object(a["p"])(w,{align:"middle",style:{"text-align":"center"}},{default:r((function(){return[Object(a["p"])(T,{span:8},{default:r((function(){return[Object(a["p"])("span",{class:"typeItem_orderNum",style:{"background-color":"rgba(59,162,114,1)",cursor:"pointer"},onClick:function(e){return v.onCountClick(t.floor,"lensPacker","正常运行")}},Object(a["T"])(t["1"]?t["1"]:0),9,["onClick"])]})),_:2},1024),Object(a["p"])(T,{span:8},{default:r((function(){return[Object(a["p"])("span",{class:"typeItem_orderNum",style:{"background-color":"rgba(238,102,102,1)",cursor:"pointer"},onClick:function(e){return v.onCountClick(t.floor,"lensPacker","报警")}},Object(a["T"])(t["2"]?t["2"]:0),9,["onClick"])]})),_:2},1024),Object(a["p"])(T,{span:8},{default:r((function(){return[Object(a["p"])("span",{class:"typeItem_orderNum",style:{"background-color":"gray",cursor:"pointer"},onClick:function(e){return v.onCountClick(t.floor,"lensPacker","设备离线")}},Object(a["T"])(t["0"]?t["0"]:0),9,["onClick"])]})),_:2},1024)]})),_:2},1024),Object(a["p"])(w,{align:"middle",style:{"text-align":"center","font-family":"'Microsoft YaHei',serif","font-size":"11px","font-weight":"bold","margin-top":"10px"}},{default:r((function(){return[Object(a["p"])(T,{span:8},{default:r((function(){return[b]})),_:1}),Object(a["p"])(T,{span:8},{default:r((function(){return[h]})),_:1}),Object(a["p"])(T,{span:8},{default:r((function(){return[g]})),_:1})]})),_:1})]})),_:2},1024)})),128))]})),_:1})]})),_:1}),Object(a["p"])(T,{span:8},{default:r((function(){return[Object(a["p"])(P,{shadow:"hover",style:{height:"500px"}},{default:r((function(){return[m,(Object(a["G"])(!0),Object(a["l"])(a["b"],null,Object(a["N"])(v.getCoatingCount,(function(t,e){return Object(a["G"])(),Object(a["l"])(P,{key:e,style:{"margin-top":"10px"}},{default:r((function(){return[Object(a["p"])("div",j,[Object(a["p"])("span",{style:{cursor:"pointer"},onClick:function(e){return v.onCardClick(t.floor,"coating")}},Object(a["T"])(t.floor),9,["onClick"])]),Object(a["p"])(w,{align:"middle",style:{"text-align":"center"}},{default:r((function(){return[Object(a["p"])(T,{span:8},{default:r((function(){return[Object(a["p"])("span",{class:"typeItem_orderNum",style:{"background-color":"rgba(59,162,114,1)",cursor:"pointer"},onClick:function(e){return v.onCountClick(t.floor,"coating","正常运行")}},Object(a["T"])(t["0"]?t["0"]:0),9,["onClick"])]})),_:2},1024),Object(a["p"])(T,{span:8},{default:r((function(){return[Object(a["p"])("span",{class:"typeItem_orderNum",style:{"background-color":"rgba(154,96,180,1)",cursor:"pointer"},onClick:function(e){return v.onCountClick(t.floor,"coating","上料预警")}},Object(a["T"])(t["1"]?t["1"]:0),9,["onClick"])]})),_:2},1024),Object(a["p"])(T,{span:8},{default:r((function(){return[Object(a["p"])("span",{class:"typeItem_orderNum",style:{"background-color":"gray",cursor:"pointer"},onClick:function(e){return v.onCountClick(t.floor,"coating","设备离线")}},Object(a["T"])(t["-1"]?t["-1"]:0),9,["onClick"])]})),_:2},1024)]})),_:2},1024),Object(a["p"])(w,{align:"middle",style:{"text-align":"center","font-family":"'Microsoft YaHei',serif","font-size":"11px","font-weight":"bold","margin-top":"10px"}},{default:r((function(){return[Object(a["p"])(T,{span:8},{default:r((function(){return[k]})),_:1}),Object(a["p"])(T,{span:8},{default:r((function(){return[O]})),_:1}),Object(a["p"])(T,{span:8},{default:r((function(){return[C]})),_:1})]})),_:1})]})),_:2},1024)})),128))]})),_:1})]})),_:1})]})),_:1})])})),_=(n("b0c0"),n("5f87")),v=n("5155"),P=n("7942"),T=n("9cd5"),w=n("313e"),x={name:"dashboard",data:function(){return{lensPacker:{},fanuc:{},coating:{}}},created:function(){var t=this;this.timer=setInterval((function(){t.getStatusCount()}),1e4)},beforeUnmount:function(){clearInterval(this.timer)},mounted:function(){this.getStatusCount()},computed:{role:function(){var t=Object(_["getUserDetail"])();return t&&t.roleIds?t.roleIds.indexOf(101)>-1?"超级管理员":"普通用户":""},userRealName:function(){var t=Object(_["getUsername"])(),e=Object(_["getUserDetail"])(),n=e&&e.name?e.name:t;return n||this.name},getTotalCount:function(){var t={automatic:{fanuc:0,lensPacker:0,coating:0},alarm:{fanuc:0,lensPacker:0,coating:0},feed:{fanuc:0,lensPacker:0,coating:0},disconnect:{fanuc:0,lensPacker:0,coating:0},others:{fanuc:0,lensPacker:0,coating:0}};for(var e in this.fanuc)for(var n in this.fanuc[e])"02"===n?t.automatic.fanuc+=this.fanuc[e][n]:"03"===n?t.alarm.fanuc+=this.fanuc[e][n]:"-1"===n?t.disconnect.fanuc+=this.fanuc[e][n]:"number"!==typeof this.fanuc[e][n]||isNaN(this.fanuc[e][n])||(t.others.fanuc+=this.fanuc[e][n]);for(var a in this.lensPacker)for(var r in this.lensPacker[a])"1"===r?t.automatic.lensPacker+=this.lensPacker[a][r]:"2"===r?t.alarm.lensPacker+=this.lensPacker[a][r]:"0"===r&&(t.disconnect.lensPacker+=this.lensPacker[a][r]);for(var o in this.coating)for(var c in this.coating[o])"0"===c?t.automatic.coating+=this.coating[o][c]:"1"===c?t.feed.coating+=this.coating[o][c]:"-1"===c&&(t.disconnect.coating+=this.coating[o][c]);return t},getFanucCount:function(){var t=[];for(var e in this.fanuc){var n=this.fanuc[e];n.floor=e,t.push(n)}return t},getLensPackerCount:function(){var t=[];for(var e in this.lensPacker){var n=this.lensPacker[e];n.floor=e,t.push(n)}return t},getCoatingCount:function(){var t=[];for(var e in this.coating){var n=this.coating[e];n.floor=e,t.push(n)}return t}},methods:{getStatusCount:function(){var t=this;Object(v["getFanucStatusCount"])().then((function(e){var n=e.data;"000000"===n.code&&(t.fanuc=n.data,Object(P["getLensPackerStatusCount"])().then((function(e){var n=e.data;"000000"===n.code&&(t.lensPacker=n.data,Object(T["getCoatingStatusCount"])().then((function(e){var n=e.data;"000000"===n.code&&(t.coating=n.data,setTimeout((function(){t.refreshTotalCountData()}),0))})))})))}))},zero_format:function(){return function(t){return t.value>2?t.value:""}},drawTotalCountChart:function(){var t,e=document.getElementById("totalStatusCount"),n=w["b"](e),a=this.getTotalCount;t={tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},legend:{data:["自动运转","设备报警","上料预警","离线","其他"]},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},xAxis:{type:"value"},yAxis:{type:"category",data:["注塑机","包料机","镀膜机"]},series:[{name:"自动运转",type:"bar",stack:"total",label:{show:!0,formatter:this.zero_format()},emphasis:{focus:"series"},data:[a.automatic.fanuc,a.automatic.lensPacker,a.automatic.coating]},{name:"设备报警",type:"bar",stack:"total",label:{show:!0,formatter:this.zero_format()},emphasis:{focus:"series"},data:[a.alarm.fanuc,a.alarm.lensPacker,a.alarm.coating]},{name:"上料预警",type:"bar",stack:"total",label:{show:!0,formatter:this.zero_format()},emphasis:{focus:"series"},data:[a.feed.fanuc,a.feed.lensPacker,a.feed.coating]},{name:"离线",type:"bar",stack:"total",label:{show:!0,formatter:this.zero_format()},emphasis:{focus:"series"},data:[a.disconnect.fanuc,a.disconnect.lensPacker,a.disconnect.coating]},{name:"其他",type:"bar",stack:"total",label:{show:!0,formatter:this.zero_format()},emphasis:{focus:"series"},data:[a.others.fanuc,a.others.lensPacker,a.others.coating]}],color:["rgba(59,162,114,1)","rgba(238,102,102,1)","rgba(154,96,180,1)","gray","rgba(252,132,82,1)"]},t&&n.setOption(t)},refreshTotalCountData:function(){var t=document.getElementById("totalStatusCount"),e=void 0;try{e=w["a"](t)}catch(a){return}if(e){var n=this.getTotalCount;e.setOption({series:[{name:"自动运转",type:"bar",stack:"total",label:{show:!0,formatter:this.zero_format()},emphasis:{focus:"series"},data:[n.automatic.fanuc,n.automatic.lensPacker,n.automatic.coating]},{name:"设备报警",type:"bar",stack:"total",label:{show:!0,formatter:this.zero_format()},emphasis:{focus:"series"},data:[n.alarm.fanuc,n.alarm.lensPacker,n.alarm.coating]},{name:"上料预警",type:"bar",stack:"total",label:{show:!0,formatter:this.zero_format()},emphasis:{focus:"series"},data:[n.feed.fanuc,n.feed.lensPacker,n.feed.coating]},{name:"离线",type:"bar",stack:"total",label:{show:!0,formatter:this.zero_format()},emphasis:{focus:"series"},data:[n.disconnect.fanuc,n.disconnect.lensPacker,n.disconnect.coating]},{name:"其他",type:"bar",stack:"total",label:{show:!0,formatter:this.zero_format()},emphasis:{focus:"series"},data:[n.others.fanuc,n.others.lensPacker,n.others.coating]}]})}else this.drawTotalCountChart()},getFanucTotalCount:function(t){var e=0;if(this.fanuc[t])for(var n in this.fanuc[t])"number"!==typeof this.fanuc[t][n]||isNaN(this.fanuc[t][n])||(e+=this.fanuc[t][n]);return e},onCardClick:function(t,e){"fanuc"===e?this.$router.push("/fanuc"+t+"?position=3B"+t):"lensPacker"===e?this.$router.push("/lensPacker"+t+"?position=3B"+t):"coating"===e&&this.$router.push("/coating"+t.substring(0,1)+"?position="+t.substring(0,1))},onCountClick:function(t,e,n){switch(e){case"fanuc":this.$router.push({name:"Fanuc3B"+t,query:{position:"3B"+t},params:{status:n}});break;case"lensPacker":this.$router.push({name:"lensPacker3B"+t,query:{position:"3B"+t},params:{status:n}});break;case"coating":this.$router.push({name:"coatingMonitor"+t.substring(0,1),query:{position:t.substring(0,1)},params:{status:n}});break}}}};n("0f41");x.render=y,x.__scopeId="data-v-f356c48c";e["default"]=x}}]);
//# sourceMappingURL=chunk-a1e69110.3a2ef11f.js.map