(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1a220eb1","chunk-2d0f0a11"],{"9cd5":function(t,e,n){"use strict";n.r(e),n.d(e,"getStatus",(function(){return i})),n.d(e,"getAlarmInfo",(function(){return u})),n.d(e,"getCoatingStatusCount",(function(){return o}));var a=n("b775");function i(){return Object(a["default"])({url:"/coating/coatingDashboard/getStatus",method:"get",headers:{"Content-Type":"application/json"}})}function u(){return Object(a["default"])({url:"/coating/coatingDashboard/getAlarmInfo",method:"get",headers:{"Content-Type":"application/json"}})}function o(){return Object(a["default"])({url:"/coating/coatingDashboard/getStatusCount",method:"get",headers:{"Content-Type":"application/json"}})}},f119:function(t,e,n){"use strict";n.r(e);n("b0c0");var a=n("7a23"),i={class:"crumbs"},u=Object(a["p"])("i",{class:"el-icon-lx-calendar"},null,-1),o=Object(a["o"])(" 镀膜机监控 "),c={class:"container"},s={style:{"margin-bottom":"20px"}},r={style:{"font-weight":"bold"}},l={style:{"text-align":"center","font-weight":"bold",color:"#008000","font-size":"24px"}};function b(t,e,n,b,d,f){var h=this,O=Object(a["P"])("el-breadcrumb-item"),p=Object(a["P"])("el-breadcrumb"),j=Object(a["P"])("el-col"),g=Object(a["P"])("el-row"),x=Object(a["P"])("el-card");return Object(a["G"])(),Object(a["l"])("div",null,[Object(a["p"])("div",i,[Object(a["p"])(p,{separator:"/"},{default:Object(a["eb"])((function(){return[Object(a["p"])(O,null,{default:Object(a["eb"])((function(){return[u,o]})),_:1}),Object(a["p"])(O,null,{default:Object(a["eb"])((function(){return[Object(a["o"])("镀膜机"+Object(a["T"])(h.$route.query.position)+"期",1)]})),_:1})]})),_:1})]),Object(a["p"])("div",c,[Object(a["p"])("div",s,[(Object(a["G"])(!0),Object(a["l"])(a["b"],null,Object(a["N"])(d.statusRadio,(function(t,e){return Object(a["G"])(),Object(a["l"])("div",{key:e,class:"status_radio_type",style:"background-color:"+f.getStatusRadioColor(t)+";text-align:center",onClick:function(e){return f.onStatusRadioClick(t)}},Object(a["T"])(t+"("+h.statusCount[t]+")"),13,["onClick"])})),128))]),(Object(a["G"])(!0),Object(a["l"])(a["b"],null,Object(a["N"])(f.coatingStatusInfo,(function(t,e){return Object(a["G"])(),Object(a["l"])(x,{key:e,"body-style":{padding:"0px",height:"60px"},shadow:"hover",class:"coating_card_type",style:{cursor:"pointer"}},{default:Object(a["eb"])((function(){return[Object(a["p"])(g,null,{default:Object(a["eb"])((function(){return[Object(a["p"])(j,null,{default:Object(a["eb"])((function(){return[Object(a["p"])("div",r,[Object(a["p"])(g,{style:{"text-align":"center",height:"30px","font-weight":"bold","font-size":"16px","border-bottom":"1px solid cornflowerblue"}},{default:Object(a["eb"])((function(){return[Object(a["p"])(j,{span:8},{default:Object(a["eb"])((function(){return[Object(a["p"])("p",l,Object(a["T"])(t.name),1)]})),_:2},1024),Object(a["p"])(j,{span:16},{default:Object(a["eb"])((function(){return[Object(a["p"])("div",{style:"background-color:"+d.statusType[f.getMachineStatus(t.status,t.isOnline)]+";height:30px;line-height:30px"},Object(a["T"])(f.getMachineStatus(t.status,t.isOnline)),5)]})),_:2},1024)]})),_:2},1024),Object(a["p"])(g,{style:{"text-align":"center",height:"30px","line-height":"30px"}},{default:Object(a["eb"])((function(){return[Object(a["p"])(j,{span:8},{default:Object(a["eb"])((function(){return[Object(a["o"])("产能："+Object(a["T"])(t.totalNums),1)]})),_:2},1024),Object(a["p"])(j,{span:16},{default:Object(a["eb"])((function(){return[Object(a["o"])("累计锅次："+Object(a["T"])(t.runNo),1)]})),_:2},1024)]})),_:2},1024)])]})),_:2},1024)]})),_:2},1024)]})),_:2},1024)})),128))])])}n("159b"),n("a434");var d=n("9cd5"),f={name:"CoatingMachineMonitor",created:function(){var t=this;this.getCoatingMachineInfo(),this.timer=setInterval((function(){t.getCoatingMachineInfo()}),1e4)},computed:{coatingStatusInfo:function(){var t=this,e=[];return this.setDefaultCount(),this.$route.params.status&&(this.setStatusRadioValue(this.$route.params.status),this.refreshPage()),this.coatingMachineInfoList.forEach((function(n){var a=t.getMachineStatus(n.status,n.isOnline);t.checkCoatingPhase(n.name)&&(t.statusRadioValue.indexOf(a)>-1&&e.push(n),t.statusCount[a]++)})),e}},methods:{refreshPage:function(){this.$router.push(this.$route.fullPath)},setStatusRadioValue:function(t){this.statusRadioValue=[],this.statusRadioValue.push(t)},setAllStatusRadioValue:function(){this.statusRadioValue=["正常运行","上料预警","设备离线"]},checkCoatingPhase:function(t){return"1"===this.$route.query.position?0===t.indexOf("A")||0===t.indexOf("B")||0===t.indexOf("C")||0===t.indexOf("D")||0===t.indexOf("E")||0===t.indexOf("F")||0===t.indexOf("L"):"2"===this.$route.query.position?-1===t.indexOf("A")&&-1===t.indexOf("B")&&-1===t.indexOf("C")&&-1===t.indexOf("D")&&-1===t.indexOf("E")&&-1===t.indexOf("F")&&-1===t.indexOf("L"):void 0},getMachineStatus:function(t,e){return e?1===t?"上料预警":0===t?"正常运行":"设备离线":"设备离线"},setDefaultCount:function(){this.statusCount={"设备离线":0,"正常运行":0,"上料预警":0}},getStatusRadioColor:function(t){return this.statusRadioValue.indexOf(t)>-1?this.statusType[t]:"rgba(235,235,235,1)"},onStatusRadioClick:function(t){var e=this.statusRadioValue.indexOf(t);e>-1?this.statusRadioValue.splice(e,1):this.statusRadioValue.push(t)},getCoatingMachineInfo:function(){var t=this;Object(d["getStatus"])().then((function(e){var n=e.data;"000000"===n.code&&(t.coatingMachineInfoList=n.data.site)}))}},beforeUnmount:function(){clearInterval(this.timer)},data:function(){return{pathStatusInfo:"",coatingMachineInfoList:[],statusType:{"设备离线":"gray","正常运行":"rgba(59,162,114,1)","上料预警":"rgba(154,96,180,1)"},statusRadio:["正常运行","上料预警","设备离线"],statusRadioValue:["正常运行","上料预警","设备离线"],statusCount:{"设备离线":0,"正常运行":0,"上料预警":0}}}};f.render=b;e["default"]=f}}]);
//# sourceMappingURL=chunk-1a220eb1.0c42b5d9.js.map